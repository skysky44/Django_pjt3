{% extends 'base.html' %}

{% block content %}
<h1>Detail</h1>
  <p class="rp">작성자 - {{ review.user }}</p>
  <p>후기 번호: {{ review.pk }}</p>
  <p>후기 제목: {{ review.title }}</p>
  <p>후기 내용: {{ review.content }}</p>
  <p>영화 이름: {{ review.movie }}</p>
  {% if review.image %}
    <p><img src="{{ review.image.url }}" alt="img" class="w-25"></p>
  {% endif %}

  {% if request.user == review.user %}
    <a href="{% url 'reviews:update' review.pk %}">[UPDATE]</a>
    <br><br>
    <form action="{% url 'reviews:delete' review.pk  %}" method="POST">
      {% csrf_token %}
      <input type="submit" value="삭제">
    </form>
    <br>
  {% endif %}
  <a href="{% url 'reviews:index' %}">[back]</a>
  <hr>
  <form action="{% url 'reviews:comment_create' review.pk %}" method="POST">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <input type="submit" value="댓글 작성">
  </form>
  <hr>
  <h3>
    댓글 목록
  </h3>
  {% for comments in comment %}
      <p>
        댓글 작성자 -
        {{ comments.user }}
      </p>
      <p>댓글 번호 -
        {{ comments.pk }}</p>
      <p>
        댓글 내용 -
        {{ comments.content }}
      </p>
      {% if request.user == comments.user %}
        <form action="{% url 'reviews:comment_delete' review.pk comments.pk %}" method="POST">
          {% csrf_token %}
          <input type="submit" value="댓글 삭제">
        </form>
      {% endif %}
    <hr>
  {% endfor %}

{% endblock content %}

